(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/car/bookCar"],{"15be":function(t,e,a){"use strict";a.r(e);var n=a("45e2"),i=a("d181");for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);var s,o=a("f0c5"),u=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=u.exports},"45e2":function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return n})},"751d":function(t,e,a){"use strict";(function(t){a("584b"),a("921b");n(a("66fd"));var e=n(a("15be"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},9295:function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("2f62");function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){s(t,e,a[e])})}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t){var e=new Date;t>0&&e.setDate(e.getDate()+t);var a=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(a,"-").concat(n,"-").concat(i)}function u(t){var e=new Date,a=e.getMinutes();a<30?e.setMinutes(30):a>30&&a<=59&&e.setMinutes(60),t>0&&e.setMinutes(e.getMinutes()+t);var n=e.getHours(),i=e.getMinutes();return n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(n,":").concat(i)}var c={data:function(){return{isAdd:!0,StatusBar:this.StatusBar,CustomBar:this.CustomBar,ScreenHeight:this.ScreenHeight,date:o(),startDate:o(),endDate:o(30),time:u(),backDate:o(),backTime:u(),peopleIndex:0,peoples:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],areaIndex:0,areas:["请选择","市内","市外"],typeIndex:0,types:["请选择","公务用车","网约车"],multiArray:[[],[]],multiIndex:[0,0],regions:[],para:{id:"",car_user:"",phone:"",people_num:1,reason:"",area:"",start_place:"",end_place:"",predict_start_time:"",predict_end_time:"",end_city:"",end_area:"",type:0}}},computed:r({},(0,i.mapState)(["userInfo"]),{start_time:function(){return this.date+" "+this.time},end_time:function(){return this.backDate+" "+this.backTime}}),onLoad:function(e){var a=this;if(e.para){this.isAdd=!1;var i=JSON.parse(decodeURIComponent(e.para));this.para.id=i.id,this.para.car_user=i.car_user,this.para.phone=i.phone,this.para.people_num=i.people_num,this.peopleIndex=i.people_num-1,this.para.reason=i.reason,this.areaIndex="市内"==i.area?1:2,this.para.area=i.area,this.para.start_place=i.start_place,this.para.end_place=i.end_place,this.date=i.predict_start_time.substring(0,10),this.time=i.predict_start_time.substring(11,16),this.backDate=i.predict_end_time.substring(0,10),this.backTime=i.predict_end_time.substring(11,16),this.para.end_city=i.end_city,this.para.end_area=i.end_area,this.typeIndex=i.type,this.para.type=i.type}else this.para.car_user=this.userInfo.user.userCnName,this.para.phone=this.userInfo.user.username;t.$http.post("/core/organization/getAreaListYn",{params:{}}).then(function(t){if("0"===t.status)if(a.regions=t.data,a.regions.forEach(function(t){a.multiArray[0].push(t.name)}),e.para){for(var i=0;i<a.multiArray[0].length;i++)a.para.end_city==a.multiArray[0][i]&&(a.multiIndex[0]=i);a.regions[a.multiIndex[0]].subs.forEach(function(t){a.multiArray[1].push(t.name)});for(i=0;i<a.multiArray[1].length;i++)a.para.end_area==a.multiArray[1][i]&&(a.multiIndex[1]=i)}else a.regions[0].subs.forEach(function(t){a.multiArray[1].push(t.name)}),a.para.end_city=a.multiArray[0][a.multiIndex[0]],a.para.end_area=a.multiArray[1][a.multiIndex[1]];else n.showToast({title:t.msg,icon:"none"})}).catch(function(t){n.hideLoading(),n.showToast({title:t.message,icon:"none"})})},methods:{DateChange:function(t){this.date=t.detail.value},TimeChange:function(t){this.time=t.detail.value},BackDateChange:function(t){this.backDate=t.detail.value},BackTimeChange:function(t){this.backTime=t.detail.value},ChangePeoples:function(t){this.peopleIndex=t.detail.value,this.para.people_num=this.peoples[t.detail.value]},ChangeAreas:function(t){this.areaIndex=t.detail.value,this.para.area=this.areas[t.detail.value]},ChangeTypes:function(t){this.typeIndex=t.detail.value,this.para.type=t.detail.value},MultiChange:function(t){this.multiIndex=t.detail.value,this.para.end_city=this.multiArray[0][this.multiIndex[0]],this.para.end_area=this.multiArray[1][this.multiIndex[1]]},MultiColumnChange:function(t){var e=this;switch(this.multiIndex[t.detail.column]=t.detail.value,t.detail.column){case 0:this.multiArray[1].length=0,this.regions[this.multiIndex[0]].subs.forEach(function(t){e.multiArray[1].push(t.name)}),this.multiIndex[1]=0;break}},Submit:function(e){this.para.predict_start_time=this.start_time,this.para.predict_end_time=this.end_time,this.para.reason.length<=0?n.showToast({icon:"none",title:"请填写用车事由"}):this.para.reason.length>20?n.showToast({icon:"none",title:"用车事由不超过20字"}):this.para.car_user.length<=0?n.showToast({icon:"none",title:"请填写用车人"}):this.para.phone.length<=0?n.showToast({icon:"none",title:"请填写手机号"}):this.para.start_place.length<=0?n.showToast({icon:"none",title:"请填写上车地点"}):this.para.end_place.length<=0?n.showToast({icon:"none",title:"请填写目的地（详细地址）"}):this.para.type<=0?n.showToast({icon:"none",title:"请选择用车类型"}):(n.showLoading({title:"提交中",mask:!1}),t.$http.post("/car/apply/"+(this.isAdd?"create":"update"),{params:this.para}).then(function(t){n.hideLoading(),"0"===t.status?(n.showToast({icon:"none",title:"提交成功"}),n.navigateBack()):n.showToast({title:t.msg,icon:"none"})}).catch(function(t){n.hideLoading(),n.showToast({title:t.message,icon:"none"})}))}}};e.default=c}).call(this,a("c8ba"),a("6e42")["default"])},d181:function(t,e,a){"use strict";a.r(e);var n=a("9295"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=i.a}},[["751d","common/runtime","common/vendor"]]]);