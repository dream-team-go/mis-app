(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/work/saveApplyRepair"],{"4aae":function(a,t,e){"use strict";(function(a){e("584b"),e("921b");i(e("66fd"));var t=i(e("57bd"));function i(a){return a&&a.__esModule?a:{default:a}}a(t.default)}).call(this,e("6e42")["createPage"])},"57bd":function(a,t,e){"use strict";e.r(t);var i=e("a842"),n=e("aad3");for(var o in n)"default"!==o&&function(a){e.d(t,a,function(){return n[a]})}(o);e("d5e4");var r,s=e("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=c.exports},8268:function(a,t,e){},a842:function(a,t,e){"use strict";var i,n=function(){var a=this,t=a.$createElement;a._self._c},o=[];e.d(t,"b",function(){return n}),e.d(t,"c",function(){return o}),e.d(t,"a",function(){return i})},aad3:function(a,t,e){"use strict";e.r(t);var i=e("f1ab"),n=e.n(i);for(var o in i)"default"!==o&&function(a){e.d(t,a,function(){return i[a]})}(o);t["default"]=n.a},d5e4:function(a,t,e){"use strict";var i=e("8268"),n=e.n(i);n.a},f1ab:function(a,t,e){"use strict";(function(a,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return e.e("colorui/components/uni-load-more").then(e.bind(null,"45d9"))},o={components:{uniLoadMore:n},data:function(){return{isAdd:!0,StatusBar:this.StatusBar,CustomBar:this.CustomBar,ScreenHeight:this.ScreenHeight,typeIndex:0,types:["请选择","维修","保养"],isShowCarModal:!1,cars:[],page:1,pageSize:100,status:"more",contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多"},oIndex:0,organizations:[{org_name:"请选择",org_id:""}],para:{id:"",car_id:"",car_number:"",car_type:"",brand:"",type:0,desc:"",repair_shop_id:"",repair_shop:""}}},onLoad:function(t){var e=this;if(t.para){this.isAdd=!1;var n=JSON.parse(decodeURIComponent(t.para));this.para.id=n.id,this.typeIndex=n.type,this.para.type=n.type,this.para.car_id=n.car_id,this.para.car_number=n.car_number,this.para.car_type=n.car_type,this.para.brand=n.brand,this.para.desc=n.desc,this.para.repair_shop_id=n.repair_shop_id,this.para.repair_shop=n.repair_shop}a.$http.post("/core/organization/getRepairShopByOrg",{params:{}}).then(function(a){if("0"===a.status)for(var o=0;o<a.data.length;o++)e.organizations.push(a.data[o]),t.para&&a.data[o].org_id==n.repair_shop_id&&(e.oIndex=o+1);else i.showToast({title:a.msg,icon:"none"})}).catch(function(a){i.hideLoading(),i.showToast({title:a.message,icon:"none"})})},methods:{getCarListData:function(){var t=this;this.status="loading",a.$http.post("/car/info/getCarByDriver",{params:{page:this.page,pageSize:this.pageSize}}).then(function(a){"0"===a.status?(t.status="noMore",t.cars=a.data):i.showToast({title:a.msg,icon:"none"})}).catch(function(a){i.showToast({title:a.message,icon:"none"})})},ChangeTypes:function(a){this.typeIndex=a.detail.value,this.para.type=a.detail.value},showCarModal:function(a){this.page=1,this.cars=[],this.isShowCarModal=!0,this.getCarListData()},hideCarModal:function(a){this.isShowCarModal=!1},getCar:function(a){this.para.car_id=a.id,this.para.car_number=a.car_number,this.para.brand=a.brand,this.para.car_type=a.car_type,this.isShowCarModal=!1},OrganizationChange:function(a){this.para.repair_shop_id=this.organizations[a.detail.value].org_id,this.para.repair_shop=this.organizations[a.detail.value].org_name,this.oIndex!=a.detail.value&&(this.oIndex=a.detail.value)},Submit:function(t){this.para.desc.length<=0?i.showToast({icon:"none",title:"请填写维修原由"}):this.para.type<=0?i.showToast({icon:"none",title:"请选择维修类型"}):this.para.car_id<=0?i.showToast({icon:"none",title:"请选择维修车辆"}):this.para.repair_shop_id.length<=0?i.showToast({icon:"none",title:"请选择维修厂"}):(i.showLoading({title:"提交中",mask:!1}),a.$http.post("/car/repair/"+(this.isAdd?"create":"update"),{params:this.para}).then(function(a){i.hideLoading(),"0"===a.status?(i.showToast({icon:"none",title:"提交成功"}),i.navigateBack()):i.showToast({title:a.msg,icon:"none"})}).catch(function(a){i.hideLoading(),i.showToast({title:a.message,icon:"none"})}))}}};t.default=o}).call(this,e("c8ba"),e("6e42")["default"])}},[["4aae","common/runtime","common/vendor"]]]);