(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/work/saveCar"],{"30e2":function(t,e,a){"use strict";var i=a("ce88"),n=a.n(i);n.a},"88db":function(t,e,a){"use strict";a.r(e);var i=a("d46b"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"91ff":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return i})},a7d8:function(t,e,a){"use strict";(function(t){a("584b"),a("921b");i(a("66fd"));var e=i(a("bed5"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},bed5:function(t,e,a){"use strict";a.r(e);var i=a("91ff"),n=a("88db");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("30e2");var o,r=a("f0c5"),h=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=h.exports},ce88:function(t,e,a){},d46b:function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n(a("1bb4"));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){return a.e("colorui/components/uni-load-more").then(a.bind(null,"45d9"))};function o(t){var e=new Date;t>0&&e.setDate(e.getDate()+t);var a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return i=i>9?i:"0"+i,n=n>9?n:"0"+n,"".concat(a,"-").concat(i,"-").concat(n)}var r={components:{uniLoadMore:s},onLoad:function(e){var a=this;if(e.para){this.isAdd=!1;var n=JSON.parse(decodeURIComponent(e.para));this.para.id=n.id,this.para.car_number=n.car_number,this.para.car_type=n.car_type,this.para.plate_color=n.plate_color,this.para.seat_num=n.seat_num,this.para.color=n.color,this.para.brand=n.brand,this.para.volume=n.volume,this.para.power=n.power,this.para.fuel_type=n.fuel_type,this.para.quality=n.quality,n.produce_time&&n.produce_time.length>0&&(this.para.produce_time=n.produce_time.substring(0,10)),n.license_time&&n.license_time.length>0&&(this.para.license_time=n.license_time.substring(0,10)),this.para.nature=n.nature,this.para.model=n.model,this.para.vin_no=n.vin_no,this.para.motor_no=n.motor_no,this.para.at_type=n.at_type,this.para.car_length=n.car_length,this.para.car_width=n.car_width,this.para.car_height=n.car_height,this.para.wheel_base=n.wheel_base,this.para.price=n.price,this.para.is_town=n.is_town,this.para.is_operate=n.is_operate,this.para.is_supervise=n.is_supervise,this.para.is_pdc=n.is_pdc,this.para.is_leather_seat=n.is_leather_seat,this.para.is_cd=n.is_cd,this.para.remark=n.remark,this.para.img=n.img,this.para.car_gps=n.car_gps,this.para.property_org=n.property_org,this.para.driver_id=n.driver_id,this.imgList.push(this.para.img),this.isTown=1==n.is_town,this.isOperate=1==n.is_operate,this.isSupervise=1==n.is_supervise,this.isPdc=1==n.is_pdc,this.isLeatherSeat=1==n.is_leather_seat,this.isCd=1==n.is_cd,this.para.driver_id.length>0&&t.$http.post("/car/driver/getInfo",{params:{driver_id:this.para.driver_id}}).then(function(t){"0"===t.status?(a.driver_name=t.data.user_cn_name,a.driver_phone=t.data.tel_no):i.showToast({title:t.msg,icon:"none"})}).catch(function(t){i.hideLoading(),i.showToast({title:t.message,icon:"none"})})}t.$http.post("/car/info/enumsInfo",{}).then(function(t){if("0"===t.status){if(t.data.car_type.forEach(function(t){return a.carTypes.push(t)}),t.data.plate_color.forEach(function(t){return a.colors.push(t)}),t.data.fuel_type.forEach(function(t){return a.fuelTypes.push(t)}),t.data.nature.forEach(function(t){return a.natures.push(t)}),t.data.at_type.forEach(function(t){return a.atTypes.push(t)}),e.para){for(var n=0;n<a.carTypes.length;n++)a.para.car_type==a.carTypes[n]&&(a.carTypeIndex=n);for(n=0;n<a.colors.length;n++)a.para.plate_color==a.colors[n]&&(a.colorIndex=n);for(n=0;n<a.fuelTypes.length;n++)a.para.fuel_type==a.fuelTypes[n]&&(a.fuelTypeIndex=n);for(n=0;n<a.natures.length;n++)a.para.nature==a.natures[n]&&(a.natureIndex=n);for(n=0;n<a.atTypes.length;n++)a.para.at_type==a.atTypes[n]&&(a.atTypeIndex=n)}}else i.showToast({title:t.msg,icon:"none"})}).catch(function(t){i.showToast({title:t.message,icon:"none"})}),t.$http.post("/core/organization/organizationPage",{params:{page:1,size:1e4}}).then(function(t){if("0"===t.status)for(var e=0;e<t.data.list.length;e++)a.para.property_org.length>0&&a.para.property_org==t.data.list[e].property_org&&(a.oIndex=e+1),a.organizations.push(t.data.list[e]);else i.showToast({title:t.msg,icon:"none"})}).catch(function(t){i.hideLoading(),i.showToast({title:t.message,icon:"none"})})},data:function(){return{isAdd:!0,StatusBar:this.StatusBar,CustomBar:this.CustomBar,ScreenHeight:this.ScreenHeight,imgList:[],carTypes:["请选择"],carTypeIndex:0,colors:["请选择"],colorIndex:0,seatNums:["请选择","1座","2座","3座","4座","5座","6座","7座","8座"],fuelTypeIndex:0,fuelTypes:["请选择"],startDate:o(-1e4),endDate:o(),natureIndex:0,natures:["请选择"],atTypeIndex:0,atTypes:["请选择"],isTown:!1,isOperate:!1,isSupervise:!1,isPdc:!1,isLeatherSeat:!1,isCd:!1,oIndex:0,organizations:[{org_name:"请选择",org_id:""}],page:1,pageSize:100,isShowDriverModal:!1,drivers:[],driver_name:"",driver_phone:"",status:"more",contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多"},para:{id:"",car_number:"",car_type:"",plate_color:"",seat_num:0,property_org:"",color:"",brand:"",volume:"",power:"",fuel_type:"",quality:"",produce_time:o(),license_time:o(),nature:"",model:"",vin_no:"",motor_no:"",at_type:"",car_length:"",car_width:"",car_height:"",wheel_base:"",price:"",is_town:0,is_operate:0,is_supervise:0,is_pdc:0,is_leather_seat:0,is_cd:0,remark:"",img:"",car_gps:"",driver_id:""}}},methods:{getDriverListData:function(){var e=this;this.status="loading",t.$http.post("/car/driver/driverList",{params:{page:this.page,pageSize:this.pageSize}}).then(function(t){"0"===t.status?(e.status="noMore",e.drivers=t.data.list):i.showToast({title:t.msg,icon:"none"})}).catch(function(t){i.showToast({title:t.message,icon:"none"})})},ChooseImage:function(){var e=this;i.chooseImage({count:1,sizeType:["original","compressed"],success:function(a){i.showLoading({title:"上传图片中",mask:!1}),t.$http.upload("/oos/upload",{name:"file",filePath:a.tempFilePaths[0]}).then(function(t){i.hideLoading(),"0"===t.status?(e.imgList.push(t.data),e.para.img=t.data,i.showToast({icon:"none",title:"上传成功"})):i.showToast({title:t.msg,icon:"none"})}).catch(function(t){i.hideLoading(),i.showToast({title:t.message,icon:"none"})})}})},DelImg:function(t){this.imgList.splice(t.currentTarget.dataset.index,1),this.para.img=""},ChangeCarType:function(t){this.carTypeIndex=t.detail.value,this.para.car_type=this.carTypes[t.detail.value]},ChangeColor:function(t){this.colorIndex=t.detail.value,this.para.plate_color=this.colors[t.detail.value]},ChangeSeatNum:function(t){this.para.seat_num=Number(t.detail.value)},ChangeFuelType:function(t){this.fuelTypeIndex=t.detail.value,this.para.fuel_type=this.fuelTypes[t.detail.value]},ProduceTimeChange:function(t){this.para.produce_time=t.detail.value},LicenseTimeChange:function(t){this.para.license_time=t.detail.value},ChangeNature:function(t){this.natureIndex=t.detail.value,this.para.nature=this.natures[t.detail.value]},ChangeAtType:function(t){this.atTypeIndex=t.detail.value,this.para.at_type=this.atTypes[t.detail.value]},ChangeIsTown:function(t){this.isTown=t.detail.value,this.para.is_town=t.detail.value?1:0},ChangeIsOperate:function(t){this.isOperate=t.detail.value,this.para.is_operate=t.detail.value?1:0},ChangeIsSupervise:function(t){this.isSupervise=t.detail.value,this.para.is_supervise=t.detail.value?1:0},ChangeIsPdc:function(t){this.isPdc=t.detail.value,this.para.is_pdc=t.detail.value?1:0},ChangeIsLeatherSeat:function(t){this.isLeatherSeat=t.detail.value,this.para.is_leather_seat=t.detail.value?1:0},ChangeIsCd:function(t){this.isCd=t.detail.value,this.para.is_cd=t.detail.value?1:0},OrganizationChange:function(t){this.para.property_org=this.organizations[t.detail.value].org_id,this.oIndex!=t.detail.value&&(this.oIndex=t.detail.value)},showDriverModal:function(t){this.page=1,this.cars=[],this.isShowDriverModal=!0,this.getDriverListData()},hideDriverModal:function(t){this.isShowDriverModal=!1},getDriver:function(t){this.para.driver_id=t.id,this.driver_name=t.user_cn_name,this.driver_phone=t.tel_no,this.isShowDriverModal=!1},Submit:function(e){this.para.car_number.length<=0?i.showToast({icon:"none",title:"请填写车牌号"}):this.para.plate_color.length<=0?i.showToast({icon:"none",title:"请选择车牌颜色"}):this.para.car_type.length<=0?i.showToast({icon:"none",title:"请选择车辆类型"}):this.para.nature.length<=0?i.showToast({icon:"none",title:"请选择车辆使用性质"}):this.para.brand.length<=0?i.showToast({icon:"none",title:"请填写品牌"}):this.para.seat_num<=0?i.showToast({icon:"none",title:"请选择座位数"}):this.para.color.length<=0?i.showToast({icon:"none",title:"请填写车身颜色"}):this.para.fuel_type.length<=0?i.showToast({icon:"none",title:"请选择燃料类型"}):this.para.volume.length<=0?i.showToast({icon:"none",title:"请填写排量"}):this.para.power.length<=0?i.showToast({icon:"none",title:"请填写功率"}):this.para.vin_no.length<=0?i.showToast({icon:"none",title:"请填写车架号"}):this.para.motor_no.length<=0?i.showToast({icon:"none",title:"请填写发动机号"}):this.para.at_type.length<=0?i.showToast({icon:"none",title:"请选择变速箱类型"}):this.para.car_length.length<=0?i.showToast({icon:"none",title:"请填写车长"}):this.para.car_width.length<=0?i.showToast({icon:"none",title:"请填写车宽"}):this.para.car_height.length<=0?i.showToast({icon:"none",title:"请填写车高"}):this.para.price.length<=0?i.showToast({icon:"none",title:"请填写购置价格"}):this.para.car_gps.length<=0?i.showToast({icon:"none",title:"请填写车辆GPS"}):this.para.img.length<=0?i.showToast({icon:"none",title:"请选择图片"}):(i.showLoading({title:"提交中",mask:!1}),t.$http.post("/car/info/save",{params:this.para}).then(function(t){i.hideLoading(),"0"===t.status?(i.showToast({icon:"none",title:"提交成功"}),i.navigateBack()):i.showToast({title:t.msg,icon:"none"})}).catch(function(t){i.hideLoading(),i.showToast({title:t.message,icon:"none"})}))}}};e.default=r}).call(this,a("c8ba"),a("6e42")["default"])}},[["a7d8","common/runtime","common/vendor"]]]);