(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/meeting/bookMeeting"],{3906:function(t,e,n){"use strict";var a=n("be86"),i=n.n(a);i.a},"4dd5":function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=function(){return n.e("colorui/components/uni-load-more").then(n.bind(null,"45d9"))};function u(t){var e=new Date;t>0&&e.setDate(e.getDate()+t);var n=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return a=a>9?a:"0"+a,i=i>9?i:"0"+i,"".concat(n,"-").concat(a,"-").concat(i)}function c(t){var e=new Date,n=e.getMinutes();n<30?e.setMinutes(30):n>30&&n<=59&&e.setMinutes(60),t>0&&e.setMinutes(e.getMinutes()+t);var a=e.getHours(),i=e.getMinutes();return a=a>9?a:"0"+a,i=i>9?i:"0"+i,"".concat(a,":").concat(i)}function h(t,e){t=t.replace(/-/g,"/");var n=new Date(t);n.setHours(n.getHours()+e);var a=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),s=n.getHours(),r=n.getMinutes();return i=i>9?i:"0"+i,o=o>9?o:"0"+o,s=s>9?s:"0"+s,r=r>9?r:"0"+r,"".concat(a,"-").concat(i,"-").concat(o," ").concat(s,":").concat(r)}function l(t,e){t=new Date(t.replace(/-/g,"/")),e=new Date(e.replace(/-/g,"/"));var n=e.getTime()-t.getTime();return n<0?0:Math.floor(n/1e3/60/60)}var d={components:{uniLoadMore:r},data:function(){return{isAdd:!0,StatusBar:this.StatusBar,CustomBar:this.CustomBar,ScreenHeight:this.ScreenHeight,date:u(),startDate:u(),endDate:u(30),time:c(),hourIndex:0,hours:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],peopleIndex:0,peoples:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],isShowBottomModal:!1,meetings:[],status:"more",contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多"},page:1,pageSize:100,para:{user_name:"",user_tel:"",people_num:1,desc:"",attend_leader:"",meeting_id:"",building_name:"",room_number:""}}},computed:o({},(0,i.mapState)(["userInfo"]),{start_time:function(){return this.date+" "+this.time},end_time:function(){return h(this.start_time,this.hours[this.hourIndex])}}),onLoad:function(t){if(t.para){this.isAdd=!1;var e=JSON.parse(decodeURIComponent(t.para));this.para.id=e.id,this.para.desc=e.desc,this.para.user_name=e.user_name,this.para.user_tel=e.user_tel,this.para.people_num=e.people_num,this.peopleIndex=e.people_num-1,this.para.room_number=e.room_number,this.para.building_name=e.building_name,this.para.meeting_id=e.meeting_id,this.para.attend_leader=e.attend_leader,this.date=e.start_time.substring(0,10),this.time=e.start_time.substring(11,16),this.hourIndex=l(e.start_time,e.end_time)-1}else this.para.user_name=this.userInfo.user.userCnName,this.para.user_tel=this.userInfo.user.username},onPullDownRefresh:function(){},onReachBottom:function(){this.status="more",this.page+=1,this.getMeetingListData()},methods:{DateChange:function(t){this.date=t.detail.value},TimeChange:function(t){this.time=t.detail.value},ChangeHours:function(t){this.hourIndex=t.detail.value},ChangePeoples:function(t){this.peopleIndex=t.detail.value,this.para.people_num=this.peoples[t.detail.value]},showBottomModal:function(t){this.page=1,this.meetings=[],this.isShowBottomModal=!0,this.getMeetingListData()},hideBottomModal:function(t){this.isShowBottomModal=!1},getMeetingListData:function(){var e=this;this.status="loading",t.$http.post("/meeting/info/meetingList",{params:{start_time:this.para.start_time,end_time:this.para.end_time,page:this.page,pageSize:this.pageSize}}).then(function(t){"0"===t.status?(e.status="noMore",e.meetings=t.data.list):a.showToast({title:t.msg,icon:"none"})}).catch(function(t){a.showToast({title:t.message,icon:"none"})})},getMeeting:function(t){this.para.meeting_id=t.id,this.para.building_name=t.name,this.para.room_number=t.number,this.isShowBottomModal=!1},Submit:function(e){this.para.start_time=this.start_time,this.para.end_time=this.end_time,this.para.desc.length<=0?a.showToast({icon:"none",title:"请填写会议主题"}):this.para.desc.length>20?a.showToast({icon:"none",title:"会议主题不超过20字"}):this.para.user_name.length<=0?a.showToast({icon:"none",title:"请填写姓名"}):this.para.user_tel.length<=0?a.showToast({icon:"none",title:"请填写手机号"}):this.para.meeting_id<=0?a.showToast({icon:"none",title:"请选择会议室"}):(a.showLoading({title:"提交中",mask:!1}),t.$http.post("/meeting/record/saveRecord",{params:this.para}).then(function(t){a.hideLoading(),"0"===t.status?(a.showToast({icon:"none",title:"提交成功"}),a.navigateBack()):a.showToast({title:t.msg,icon:"none"})}).catch(function(t){a.hideLoading(),a.showToast({title:t.message,icon:"none"})}))}}};e.default=d}).call(this,n("c8ba"),n("6e42")["default"])},"552d":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})},a06e:function(t,e,n){"use strict";n.r(e);var a=n("4dd5"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},be86:function(t,e,n){},c01e:function(t,e,n){"use strict";(function(t){n("584b"),n("921b");a(n("66fd"));var e=a(n("c90a"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},c90a:function(t,e,n){"use strict";n.r(e);var a=n("552d"),i=n("a06e");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("3906");var s,r=n("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=u.exports}},[["c01e","common/runtime","common/vendor"]]]);